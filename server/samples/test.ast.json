{"type":"Script","body":[{"type":"VariableDeclaration","declarations":[{"name":"reply","init":{"source":"inner","type":"string","value":""}}]},{"type":"VariableDeclaration","declarations":[{"name":"name","init":{"source":"outer"}},{"name":"account","init":{"source":"outer"}}]},{"type":"VariableDeclaration","declarations":[{"name":"total","init":{"source":"inner","type":"number","value":"0"}},{"name":"temp","init":{"source":"inner","type":"number","value":"0"}}]},{"type":"BranchEvent","name":{"value":"start","type":"String"},"block":[{"type":"Function","name":"send","params":[{"value":"你好，${name}，我是机器人——小吃，有什么可以帮到你的吗？\\n","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"如果您长时间未回应，我会临时断开连接","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"以下命令，您可输入数字，也可输入关键字","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1是订单，2是评价\\投诉，3是退出","type":"String"}]},{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"1|预约|订餐|下单","type":"String"},{"value":"order","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"2|投诉|评价","type":"String"},{"value":"feedback","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"3","type":"String"},{"value":"exit","type":"String"}]}]}]},{"type":"BranchEvent","name":{"value":"order","type":"String"},"block":[{"type":"Function","name":"send","params":[{"value":"有以下食物，输入您要点的食物：","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"0代表返回，1代表牛肉汤，2代表烩面，3代表米线","type":"String"}]},{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"0","type":"String"},{"value":"start","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"1|牛肉汤","type":"String"},{"value":"beefsoup","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"2|烩面","type":"String"},{"value":"noodles","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"3|米线","type":"String"},{"value":"needles","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"beefsoup","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"10","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"牛肉汤价格为10元，是否确定","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1代表确定，2代表返回上一步，3返回开始","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"next","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"noodles","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"8","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"烩面价格为8元，是否确定","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1代表确定，2代表返回上一步，3返回开始","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"next","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"needles","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"11","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"烩面价格为11元，是否确定","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1代表确定，2代表返回上一步，3返回开始","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"next","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"next","type":"String"},"block":[{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"1|是|可以|确定|行","type":"String"},{"value":"snacks","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"2|返回","type":"String"},{"value":"order","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"3","type":"String"},{"value":"start","type":"String"}]}]}]}]},{"type":"BranchEvent","name":{"value":"snacks","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"total","type":"Identifier"},"operateStack":[{"value":"total","type":"Identifier"},{"value":"temp","type":"Identifier"},{"value":"+","type":"ADD"}]},{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"0","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"是否需要零嘴","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"0代表不需要，1代表卤蛋，2代表香肠，3代表豆腐干","type":"String"}]},{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"0","type":"String"},{"value":"settle","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"1|卤蛋","type":"String"},{"value":"egg","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"2|香肠","type":"String"},{"value":"sausage","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"3|豆腐干","type":"String"},{"value":"tofu","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"egg","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"1","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"卤蛋价格为1元，是否确定","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1代表确定，2代表返回上一步，3返回开始","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"next","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"sausage","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"2","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"香肠价格为2元，是否确定","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1代表确定，2代表返回上一步，3返回开始","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"next","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"tofu","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"1","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"豆腐干价格为1元，是否确定","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"1代表确定，2代表返回上一步，3返回开始","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"next","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"next","type":"String"},"block":[{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"1|是|可以|确定|行","type":"String"},{"value":"settle","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"2|返回","type":"String"},{"value":"snacks","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"3","type":"String"},{"value":"start","type":"String"}]}]}]}]},{"type":"BranchEvent","name":{"value":"settle","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"total","type":"Identifier"},"operateStack":[{"value":"total","type":"Identifier"},{"value":"temp","type":"Identifier"},{"value":"+","type":"ADD"}]},{"type":"AssignEvent","src":{"value":"temp","type":"Identifier"},"operateStack":[{"value":"0","type":"Numeric"}]},{"type":"Function","name":"send","params":[{"value":"正在为您结算...","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"您的订单价格共${total}元，您的余额为${account}元，是否支付","type":"String"}]},{"type":"Function","name":"send","params":[{"value":"0为取消，1代表支付","type":"String"}]},{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"0","type":"String"},{"value":"start","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"1","type":"String"},{"value":"finish","type":"String"}]},{"type":"Function","name":"match","params":[{"value":"","type":"String"},{"value":"exit","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"finish","type":"String"},"block":[{"type":"AssignEvent","src":{"value":"account","type":"Identifier"},"operateStack":[{"value":"account","type":"Identifier"},{"value":"total","type":"Identifier"},{"value":"-","type":"SUB"}]},{"type":"Function","name":"send","params":[{"value":"支付成功，您的余额为${account}元","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"exit","type":"String"}]}]}]},{"type":"BranchEvent","name":{"value":"feedback","type":"String"},"block":[{"type":"Function","name":"send","params":[{"value":"若您有任何意见或看法，请告知我们。","type":"String"}]},{"type":"Function","name":"listen","params":[{"value":"20","type":"Numeric"},{"value":"reply","type":"Identifier"}]},{"type":"Function","name":"detect","params":[{"value":"reply","type":"Identifier"}],"block":[{"type":"Function","name":"match","params":[{"value":"","type":"String"},{"value":"exit","type":"String"}]}]},{"type":"Function","name":"send","params":[{"value":"已经收到您的建议，感谢您的合作。","type":"String"}]},{"type":"Function","name":"goto","params":[{"value":"start","type":"String"}]}]},{"type":"BranchEvent","name":{"value":"exit","type":"String"},"block":[{"type":"Function","name":"send","params":[{"value":"欢迎下次光临！","type":"String"}]},{"type":"Function","name":"exit"}]}]}